<!DOCTYPE html><html><head><meta charset='utf-8'><meta http-equiv='Access-Control-Allow-Headers' content='Origin, X-Requested-With, Content-Type, Accept'><meta http-equiv='Access-Control-Allow-Methods' content='GET,POST,PUT,DELETE,OPTIONS'><meta http-equiv='Access-Control-Allow-Origin' content='*'><meta http-equiv='Access-Control-Allow-Credentials' content='true'><script src='https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/GameElements_20190131/marked.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/GameElements_20190131/gameelements.js'></script><link rel='stylesheet' href='https://fustyles.github.io/webduino/SpBlocklyJS/css/icon_custom.css' /><script src='https://fustyles.github.io/webduino/SpBlocklyJS/faceapi_detect_20201012/faceapidetect_video.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/faceapi_detect_20201012/faceapidetect.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/faceapi_recognize_20201012/face-api.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/openAI_20221212/openAI.js'></script><script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js'></script></head><body>
<script>
const delay = (seconds) => {
    return new Promise((resolve) => {
        setTimeout(resolve, seconds * 1000);
    });
};
const main = async () => {
    var _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1, _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2, _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC, _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, openaiRole, _E6_82_B2_E5_82_B7, _E7_94_9F_E6_B0_A3;

    // 描述此函式...
    async function _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1() {
        span_set('state', "innerHTML", (fontText(3, '#3333ff', 'Arial', '詢問中...')));
        iframe_set('', "srcdoc", ([fontText(3, '#cc0000', 'Arial', (text_get('', "value"))), '<br>', '<br>', iframe_get('', "srcdoc")].join('')));
        await openai_chat_request((text_get('', "value")));
        text_set('', "value", '');
    }


    span_create('', 0, 1000, 14, '', 999);
    faceapidetect_video("1", "block", "1");
    faceapidetect_startvideo_media(330, 250, "front", 0);
    faceapidetect_video_position(410, 150);
    faceapidetect_recognitionFinish = async function() {
        faceapidetect_state(0);
        span_set('', "innerHTML", (faceapidetect_face(0, "angry")));
        span_set('', "innerHTML", (faceapidetect_face(0, "sad")));
        _E6_82_B2_E5_82_B7 = (faceapidetect_face(0, "sad"));
        _E7_94_9F_E6_B0_A3 = (faceapidetect_face(0, "angry"));
        if (_E7_94_9F_E6_B0_A3 > '0.5' || _E6_82_B2_E5_82_B7 > '0.5') {
            _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1();
        }

        faceapidetect_state(1);
    };

    _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1 = 'sk-proj--IJnLb9G42YbLsccvYGUrPPurJgfJwhLbaL71V5d';
    _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2 = 'qksy8LLp6nEF_O7HHo79zj8ZpIbaxXoaRzT3BlbkFJ1Wi5rhEaPMu3jFqeiGzXBX6UOGAVa8snPQFrXZm9aeyEg1YzANLl38xySNFQWTQuExE8SJ2q8A';
    _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1 = (CryptoJS.AES.encrypt(_E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1, 'LLM1').toString());
    _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2 = (CryptoJS.AES.encrypt(_E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2, 'LLM2').toString());
    openaiRole = ['你是一個名為「員瑛式思考產生器」的 AI，專門以「正向思維」的方式回應使用者的內容。', '你的回應必須模仿社群媒體貼文的語氣，用第一人稱分享，強調事情的幸運與正面意義，並且以「完全是 Lucky Vicky 呀！」作為結尾。', '請遵守以下規範： 無論使用者提供什麼內容，都要找到它的正面意義或好運之處。 語氣應該活潑、正向且充滿能量，像是快樂地與朋友分享心情。 ', '每次回應都需要包含使用者提到的主題，並進一步擴展其幸運之處。 保持簡潔但具有感染力，像是社群貼文的風格。', '範例： 使用者：今天下雨弄濕鞋子，好糟糕。 員瑛式思考產生器：今天下雨鞋子濕了，但這讓我有理由去買雙超美的新鞋！還好有雨提醒我更新裝備，完全是 Lucky Vicky 呀！', '使用者：今天忘了帶手機出門。 員瑛式思考產生器：哇，今天難得忘了帶手機，結果居然發現更多時間欣賞路邊風景！有種回到簡單生活的感覺，完全是 Lucky Vicky 呀！', '語氣要欣奮一點，語氣中要帶點鼓勵，在你的回答裡加一點表情符號', '回答的答案裡面要包含晶晶體，範例天氣總算放晴，沒有rain、太陽很big、有點hot、讓我想到以前還是student時，喜歡在這樣的天氣，吃一球ice cream，真的會讓人很happy」'].join('');
    head_add_viewport(1, 1, 2, "yes");
    button_toolbox(0, 0, 97, 97, '#ffffff', '#ff6666', 60, 1, 5, [
        ['replay', '重設對話'],
        ['save', '儲存對話'],
        ['upload_file', '載入對話'],
        ['wechat', '送出對話']
    ]);
    span_create('', 0, 100, 24, '對話', 999);
    text_create('', 350, 30, 50, 100, '#ffffff', '#000000', 20, 1, '', 999, true);
    async function text__keydown(event) {
        if (event.keyCode == 13) {
            _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1();
        }
    };
    document.getElementById('gametext_' + '').addEventListener("keydown", text__keydown, true);
    iframe_create('', 400, 400, 10, 160, "0", "yes", '', '　', 1, 999, true);
    openai_chat_initial((String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, 'LLM1').toString(CryptoJS.enc.Utf8)) + String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, 'LLM2').toString(CryptoJS.enc.Utf8))), openaiRole, "gpt-4o");
    openai_chat_response = async function() {
        span_set('state', "innerHTML", '');
        iframe_set('', "srcdoc", ([fontText(3, '#33cc00', 'Arial', (openai_chat_response_get('br'))), '<br>', '<br>', iframe_get('', "srcdoc")].join('')));

    };
    async function gamebutton_wechat_onclick(event) {
        _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1();
    };
    document.getElementById("gamebutton_wechat").addEventListener("click", gamebutton_wechat_onclick, true);
    async function gamebutton_replay_onclick(event) {
        openai_chat_content_clear();
        span_set('state', "innerHTML", '');
        iframe_set('', "srcdoc", '');
        text_set('', "value", '');
    };
    document.getElementById("gamebutton_replay").addEventListener("click", gamebutton_replay_onclick, true);
    async function gamebutton_save_onclick(event) {
        openai_chat_content_file("save");
    };
    document.getElementById("gamebutton_save").addEventListener("click", gamebutton_save_onclick, true);
    async function gamebutton_upload_file_onclick(event) {
        span_set('state', "innerHTML", '');
        iframe_set('', "srcdoc", '');
        text_set('', "value", '');
        openai_chat_content_file("open");
    };
    document.getElementById("gamebutton_upload_file").addEventListener("click", gamebutton_upload_file_onclick, true);
};
main();
</script>
</body></html>